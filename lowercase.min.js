JFCustomWidgetUtils.domReady(function(){class a{params;input=document.querySelector("#formatted");messageEl=document.querySelector("#message");fieldObj;tarVal;constructor(){this.params=JFCustomWidget.getWidgetSettings(),this.params.srcId?this.params.srcId=this.params.srcId.substring(1):this.showError("Field ID must be specified."),this.updateValue(),JFCustomWidget.listenFromField(this.params.srcId,"change",a=>{this.updateValue()})}updateValue=async()=>{if(this.fieldObj=await this.getFields(),this.fieldObj.data[0].type){switch(this.params.format){case"Lowercase":this.tarVal=this.fieldObj.data[0].value.toLowerCase();break;case"Uppercase":this.tarVal=this.fieldObj.data[0].value.toUpperCase();break;case"Proper Case":this.tarVal=this.toTitleCase(this.fieldObj.data[0].value)}return"Yes"==this.params.trim&&(this.tarVal=this.tarVal.trim()),this.input.value=this.tarVal,JFCustomWidget.sendData({value:this.tarVal}),this.tarVal}this.showError("Invalid source field ID.")};getFields=()=>new Promise((a,b)=>{JFCustomWidget.getFieldsValueById([this.params.srcId.split("_")[1]||"error"],b=>a(b))});toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}resizeWidget(){var a=document.getElementsByTagName("body")[0].clientHeight||94;JFCustomWidget.isFromCardform()&&a<94&&(a=94),JFCustomWidget.requestFrameResize({height:a})}showError(a){this.input.style.display="none",this.messageEl.innerHTML=a}getData(){return{valid:!!this.tarVal,value:this.tarVal}}}JFCustomWidget.subscribe("ready",function(b){var c=new a(b);JFCustomWidget.subscribe("submit",function(){JFCustomWidget.sendSubmit(c.getData())}),JFCustomWidget.subscribe("show",function(){c.resizeWidget()})})})